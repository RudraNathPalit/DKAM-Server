#!/usr/bin/bash
url=http://oak-07.jf.intel.com/ikt_kernel_deb_repo/pool/main/l/linux-5.15.71-lts-bullpen-230103t044020z/linux-image-5.15.71-lts-bullpen-230103t044020z-dbg_5.15.71-8_amd64.deb
package=linux-image-5.15.71-lts-bullpen-230103t044020z-dbg_5.15.71-8_amd64.deb
version=5.15.71-lts-bullpen-230103t044020z

# Download the Kernel
wget $url

# Install the Kernel
dpkg -i $package

# Find Kernel entry number
number=$(awk -F\' '/menuentry / {print $2}' /boot/grub/grub.cfg | grep -n $version | grep -v "(recovery mode)" | cut -d : -f1)
kernel_number=$(($number - 1))

echo $kernel_number

# Replace default Boot kernel with Kernel entry number
# sed -i 's/GRUB_DEFAULT=.*/GRUB_DEFAULT=1>'$kernel_number'/' ./grub

# Reboot System
# sudo reboot