#!/usr/bin/bash
url=SUBSTITUTE_URL
package=SUBSTITUTE_PACKAGE
version=SUBSTITUTE_VERSION

# Download the Kernel
wget $url

# Install the Kernel
dpkg -i $package

# Find Kernel entry number
number=$(awk -F\' '/menuentry / {print $2}' /boot/grub/grub.cfg | grep -n $version | grep -v "(recovery mode)" | cut -d : -f1)
kernel_number=$(($number - 1))

echo $kernel_number

# Replace default Boot kernel with Kernel entry number
# sed -i 's/GRUB_DEFAULT=.*/GRUB_DEFAULT=1>'$kernel_number'/' ./grub